import os
import subprocess

from flask import Flask, render_template, request, render_template_string

app = Flask(__name__)


@app.route("/command_injection_1")
def command_injection_1():
    # return os.system(f"echo 'Hello '{name}")
    return render_template("command_injection_1.html")


@app.route("/command_injection_1", methods=["POST"])
def command_injection_1_post():
    name = request.form["name"]
    try:
        return subprocess.check_output(
            f"echo Hello {name}, I have been expecting you", shell=True
        )
    except subprocess.CalledProcessError as e:
        print(e)
        return "That text doesn't exist"
    # solution ;cat ~/passwordLVL1.txt; #


if __name__ == "__main__":
    app.run(host="0.0.0.0")
