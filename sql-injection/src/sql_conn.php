<?php
getenv('MYSQL_DBHOST') ? $db_host = getenv('MYSQL_DBHOST') : $db_host = "localhost";
getenv('MYSQL_DBPORT') ? $db_port = getenv('MYSQL_DBPORT') : $db_port = "3306";
getenv('MYSQL_DBUSER') ? $db_user = getenv('MYSQL_DBUSER') : $db_user = "root";
getenv('MYSQL_DBPASS') ? $db_pass = getenv('MYSQL_DBPASS') : $db_pass = "";
getenv('MYSQL_DBNAME') ? $db_name = getenv('MYSQL_DBNAME') : $db_name = "test";

if (strlen($db_name) === 0) {
  $conn = new mysqli("$db_host:$db_port", $db_user, $db_pass);
} else {
  $conn = new mysqli("$db_host:$db_port", $db_user, $db_pass, $db_name);
  $querycheckUser = 'SELECT 1 FROM `users`';
  $result = mysqli_query($conn, $querycheckUser);

  if ($result == false) {
    $queryCreateUserTable = "CREATE TABLE IF NOT EXISTS `users` (
    `id` int(11) unsigned NOT NULL auto_increment,
    `username` varchar(255) NOT NULL default '',
    `password` varchar(255) NOT NULL default '',
    `Flag` varchar(255) NOT NULL default '',
    PRIMARY KEY  (`id`)
  )";
    if (!$conn->query($queryCreateUserTable)) {
    }
    $sql = "INSERT INTO `users` (`id`, `username`, `password`, `Flag`) VALUES
  (1, 'admin', 'ad','1')
  (2,'user', 'ad','')";

    if ($conn->query($sql) === TRUE) {
      //echo "Database and Table On";
    } //else echo "Database and Table Off" . $conn->error;
    //}
  }

  $querycheckFiliale = 'SELECT id FROM `Filiale`';
  $result = mysqli_query($conn, $querycheckFiliale);
  if ($result1 == false) {
    $queryCreateFilialeTable = "CREATE TABLE IF NOT EXISTS `Filiale` (
   
    `Filiale` int(11) unsigned NOT NULL auto_increment,
    `Standort` varchar(255) NOT NULL default '',
    `Land` varchar(255) NOT NULL default '',
    `Umsatz` double NOT NULL,
    `Jahr` int(11) NOT NULL,
    PRIMARY KEY  (`Filiale`)
  )";

    if (!$conn->query($queryCreateFilialeTable)) {
      // echo "Table creation failed: (" . $conn->errno . ") " . $conn->error;
    }
    $sql1 = " INSERT INTO `Filiale` (`Filiale`, `Standort`, `Land`, `Umsatz`, `Jahr`) VALUES
  (1, 'Hamburg', 'Deutschland', 150, 2020),
  (2, 'Berlin', 'Deustchland', 150, 2020),
  (3, 'Prag', 'Tschechien', 80, 2020),
  (4, 'Berlin', ' Deuschland', 100, 2021)";
  }
  if ($conn->query($sql1) === TRUE) {
    //echo "Database and Table Online";
  } //else echo "Database and Table Offline" . $conn->error;
}
// Check connection
if ($conn->connect_error) {
  // die("Connection failed: " . $conn->connect_error);
  echo "Zur Datenbank verbinden braucht etwas Zeit. Druecken Sie ctl+shift+R, bis sie verbunden wird.";
}




?>